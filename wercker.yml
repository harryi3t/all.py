box: python
build:
  steps:
    - script:
        name : move source
        # wercker variables:
        # http://old-devcenter.wercker.com/articles/introduction/pipeline.html
        code : |-
            # sometimes scripts requires same folder name
            # /pipeline/source - default $WERCKER_SOURCE_DIR
            # /pipeline/source/owner/repo/ - new $WERCKER_SOURCE_DIR
            path="$WERCKER_SOURCE_DIR/$WERCKER_GIT_OWNER/$WERCKER_GIT_REPOSITORY"
            mkdir -p "$path"
            export WERCKER_SOURCE_DIR="$path"
    - script:
        name: "init"
        code: |-
          #mv $PWD $WERCKER_GIT_DOMAIN/$WERCKER_GIT_OWNER/$WERCKER_GIT_REPOSITORY
          [ -s requirements.txt ] && pip install -r requirements.txt
          python setup.py install
          pwd
          echo WERCKER_SOURCE_DIR=$WERCKER_SOURCE_DIR
          echo WERCKER_GIT_OWNER=$WERCKER_GIT_OWNER
          echo WERCKER_GIT_REPOSITORY=$WERCKER_GIT_REPOSITORY
    - script:
        name: "tests"
        code: |-
          bash Tests/run.sh